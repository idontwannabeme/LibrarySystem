﻿@{
    ViewData["Title"] = "Главная - Библиотечная система";
}

<!-- Welcome Section -->
<div style="text-align: center; padding: 4rem 2rem; background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); border-radius: 20px; margin-bottom: 3rem;">
    <h1 style="font-size: 3rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 1rem;">Добро пожаловать, @Context.Session.GetString("UserName")! 👋</h1>
    <p style="font-size: 1.3rem; color: #666;">Ваша роль: <strong style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">@Context.Session.GetString("UserRole")</strong></p>
</div>

<!-- Main Content -->
<div style="background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border-radius: 20px; padding: 3rem; box-shadow: 0 20px 40px rgba(0,0,0,0.1); margin-bottom: 2rem;">

    <!-- Statistics Section -->
    <div style="text-align: center; margin-bottom: 3rem;">
        <h2 style="font-size: 2.5rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 1rem;">📊 Общая статистика</h2>
        <p style="font-size: 1.2rem; color: #666;">Актуальная информация о библиотечном фонде</p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
        <!-- Stat Card 1 -->
        <div style="background: white; padding: 2rem; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer;" 
             onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.2)';" 
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)';">
            <div style="font-size: 3rem; margin-bottom: 1rem;">📚</div>
            <div style="font-size: 3rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">@(ViewBag.Statistics?.TotalBooks ?? 0)</div>
            <div style="font-size: 1.1rem; color: #555; margin-bottom: 0.5rem;">Всего книг в фонде</div>
            <div style="color: #888; font-size: 0.9rem;">+5 новых на этой неделе</div>
        </div>

        <!-- Stat Card 2 -->
        <div style="background: white; padding: 2rem; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer;" 
             onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.2)';" 
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)';">
            <div style="font-size: 3rem; margin-bottom: 1rem;">✅</div>
            <div style="font-size: 3rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">@(ViewBag.Statistics?.AvailableBooks ?? 0)</div>
            <div style="font-size: 1.1rem; color: #555; margin-bottom: 0.5rem;">Доступно сейчас</div>
            <div style="color: #888; font-size: 0.9rem;">Готовы к выдаче</div>
        </div>

        <!-- Stat Card 3 -->
        <div style="background: white; padding: 2rem; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer;" 
             onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.2)';" 
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)';">
            <div style="font-size: 3rem; margin-bottom: 1rem;">👥</div>
            <div style="font-size: 3rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">@(ViewBag.Statistics?.TotalReaders ?? 0)</div>
            <div style="font-size: 1.1rem; color: #555; margin-bottom: 0.5rem;">Активных читателей</div>
            <div style="color: #888; font-size: 0.9rem;">В системе сейчас</div>
        </div>

        <!-- Stat Card 4 -->
        <div style="background: white; padding: 2rem; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer;" 
             onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.2)';" 
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)';">
            <div style="font-size: 3rem; margin-bottom: 1rem;">📖</div>
            <div style="font-size: 3rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">@(ViewBag.Statistics?.ActiveLoans ?? 0)</div>
            <div style="font-size: 1.1rem; color: #555; margin-bottom: 0.5rem;">Книг выдано</div>
            <div style="color: #888; font-size: 0.9rem;">На руках у читателей</div>
        </div>
    </div>

    <!-- Action Cards - Разделенные по ролям -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
        @{
            var userRole = Context.Session.GetString("UserRole");
        }

        <!-- Общий функционал для всех авторизованных -->
        <a href="@Url.Action("Search", "Home")" style="background: white; padding: 2.5rem 2rem; border-radius: 15px; text-align: center; text-decoration: none; color: inherit; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer; display: block;"
           onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.3)'; this.style.background='linear-gradient(135deg, #667eea, #764ba2)'; this.style.color='white';" 
           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)'; this.style.background='white'; this.style.color='inherit';">
            <div style="font-size: 3.5rem; margin-bottom: 1.5rem;">🔍</div>
            <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">Умный поиск книг</h3>
            <p style="line-height: 1.6;">Найдите нужную книгу по автору, названию, жанру или ключевым словам</p>
        </a>

        <a href="@Url.Action("Catalog", "Home")" style="background: white; padding: 2.5rem 2rem; border-radius: 15px; text-align: center; text-decoration: none; color: inherit; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer; display: block;"
           onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.3)'; this.style.background='linear-gradient(135deg, #667eea, #764ba2)'; this.style.color='white';" 
           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)'; this.style.background='white'; this.style.color='inherit';">
            <div style="font-size: 3.5rem; margin-bottom: 1.5rem;">📚</div>
            <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">Полный каталог</h3>
            <p style="line-height: 1.6;">Изучите весь библиотечный фонд с удобной навигацией</p>
        </a>

        <!-- Только для читателей -->
        @if (userRole == "Reader")
        {
                <a href="@Url.Action("MyBooks", "Home")" style="background: white; padding: 2.5rem 2rem; border-radius: 15px; text-align: center; text-decoration: none; color: inherit; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer; display: block;"
                   onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.3)'; this.style.background='linear-gradient(135deg, #667eea, #764ba2)'; this.style.color='white';" 
                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)'; this.style.background='white'; this.style.color='inherit';">
                    <div style="font-size: 3.5rem; margin-bottom: 1.5rem;">📖</div>
                    <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">Мои книги</h3>
                    <p style="line-height: 1.6;">Управляйте своими бронированиями и отслеживайте выданные книги</p>
                </a>
        }

        <!-- Только для сотрудников и администраторов -->
        @if (userRole == "Librarian" || userRole == "Admin" || userRole == "SystemAdmin")
        {
                <a href="@Url.Action("Management", "Home")" style="background: white; padding: 2.5rem 2rem; border-radius: 15px; text-align: center; text-decoration: none; color: inherit; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer; display: block;"
                   onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.3)'; this.style.background='linear-gradient(135deg, #667eea, #764ba2)'; this.style.color='white';" 
                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)'; this.style.background='white'; this.style.color='inherit';">
                    <div style="font-size: 3.5rem; margin-bottom: 1.5rem;">👥</div>
                    <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">Панель управления</h3>
                    <p style="line-height: 1.6;">Управление читателями, бронированиями и библиотечным фондом</p>
                </a>
        }

        <!-- Только для администраторов -->
        @if (userRole == "Admin" || userRole == "SystemAdmin")
        {
                <a href="@Url.Action("Admin", "Home")" style="background: white; padding: 2.5rem 2rem; border-radius: 15px; text-align: center; text-decoration: none; color: inherit; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer; display: block;"
                   onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.3)'; this.style.background='linear-gradient(135deg, #667eea, #764ba2)'; this.style.color='white';" 
                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)'; this.style.background='white'; this.style.color='inherit';">
                    <div style="font-size: 3.5rem; margin-bottom: 1.5rem;">⚙️</div>
                    <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">Администрирование</h3>
                    <p style="line-height: 1.6;">Управление системой, пользователями и аналитика</p>
                </a>
        }

        <!-- Только для системных администраторов -->
        @if (userRole == "SystemAdmin")
        {
                <a href="@Url.Action("SystemAdmin", "Home")" style="background: white; padding: 2.5rem 2rem; border-radius: 15px; text-align: center; text-decoration: none; color: inherit; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(102,126,234,0.1); cursor: pointer; display: block;"
                   onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 20px 40px rgba(102,126,234,0.3)'; this.style.background='linear-gradient(135deg, #667eea, #764ba2)'; this.style.color='white';" 
                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)'; this.style.background='white'; this.style.color='inherit';">
                    <div style="font-size: 3.5rem; margin-bottom: 1.5rem;">🔧</div>
                    <h3 style="font-size: 1.3rem; font-weight: 700; margin-bottom: 1rem;">Системное администрирование</h3>
                    <p style="line-height: 1.6;">Расширенное управление системой и пользователями</p>
                </a>
        }
    </div>
</div>

<!-- News Section -->
<div style="background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border-radius: 20px; padding: 3rem; box-shadow: 0 20px 40px rgba(0,0,0,0.1);">
    <div style="text-align: center; margin-bottom: 3rem;">
        <h2 style="font-size: 2.5rem; font-weight: 800; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 1rem;">📰 Новости библиотеки</h2>
        <p style="font-size: 1.2rem; color: #666;">Следите за последними событиями и обновлениями</p>
    </div>

    <div style="display: grid; gap: 1.5rem;">
        <!-- News Item 1 -->
        <div style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 1.5rem; border-radius: 12px; border-left: 5px solid #2196f3;">
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 1rem;">
                <span style="background: #2196f3; color: white; padding: 8px 12px; border-radius: 8px; font-size: 1.2rem;">🎉</span>
                <h4 style="color: #1976d2; margin: 0; font-size: 1.3rem;">Новые поступления января</h4>
            </div>
            <p style="color: #455a64; margin: 0 0 1rem 0; line-height: 1.6;">В фонд библиотеки поступили новые книги по программированию, искусственному интеллекту и современной литературе. Все новинки уже доступны для бронирования!</p>
            <div style="font-size: 0.9rem; color: #78909c;">
                📅 Опубликовано: 15.01.2025
            </div>
        </div>

        <!-- News Item 2 -->
        <div style="background: linear-gradient(135deg, #f3e5f5, #e1bee7); padding: 1.5rem; border-radius: 12px; border-left: 5px solid #9c27b0;">
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 1rem;">
                <span style="background: #9c27b0; color: white; padding: 8px 12px; border-radius: 8px; font-size: 1.2rem;">📅</span>
                <h4 style="color: #7b1fa2; margin: 0; font-size: 1.3rem;">Литературный вечер</h4>
            </div>
            <p style="color: #455a64; margin: 0 0 1rem 0; line-height: 1.6;">Приглашаем всех желающих на вечер современной литературы с участием местных авторов. 25 января в 18:00 в основном читальном зале.</p>
            <div style="font-size: 0.9rem; color: #78909c;">
                📅 Мероприятие: 25.01.2025 в 18:00
            </div>
        </div>

        <!-- News Item 3 -->
        <div style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 1.5rem; border-radius: 12px; border-left: 5px solid #4caf50;">
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 1rem;">
                <span style="background: #4caf50; color: white; padding: 8px 12px; border-radius: 8px; font-size: 1.2rem;">🕐</span>
                <h4 style="color: #2e7d32; margin: 0; font-size: 1.3rem;">Изменение графика работы</h4>
            </div>
            <p style="color: #455a64; margin: 0 0 1rem 0; line-height: 1.6;">С 1 февраля библиотека переходит на новый график работы: Пн-Пт с 9:00 до 20:00, Сб-Вс с 10:00 до 18:00.</p>
            <div style="font-size: 0.9rem; color: #78909c;">
                📅 Вступает в силу: 01.02.2025
            </div>
        </div>
    </div>
</div>

<script>
    function showFeature(featureName) {
        alert(`Функция "${featureName}" находится в разработке и будет доступна в ближайшем обновлении! 🚀`);
    }

    // Анимация появления элементов при загрузке
    document.addEventListener('DOMContentLoaded', function() {
        const elements = document.querySelectorAll('div[style*="border-radius: 15px"]');
        elements.forEach((element, index) => {
            element.style.opacity = '0';
            element.style.transform = 'translateY(30px)';
            element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';

            setTimeout(() => {
                element.style.opacity = '1';
                element.style.transform = 'translateY(0)';
            }, index * 100);
        });
    });
</script>